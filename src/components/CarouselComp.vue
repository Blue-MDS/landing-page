<template>
  <div class="d-flex flex-column">
  <Carousel ref="myCarousel" :items-to-show="$vuetify.display.lgAndUp ? 1.8 : 1" :wrap-around="true" @update:modelValue="updateCurrentIndex">
    <Slide v-for="(article, index) in articles" :key="index">
      <div class="carousel__item d-flex flex-column flex-md-row pa-md-4 align-center justify-space-around">
        <div class="d-flex flex-column px-6 text-uppercase">
          <span v-if="article.title" class="mb-2">{{ article.title }}</span>
          <span>{{ article.text }}</span>
        </div>
        <img :src="article.img" alt="slide" />
      </div>
    </Slide>

    <template #addons>
    </template>
  </Carousel>
  <div class="text-center mt-8">
    <button @click="prevSlide"><v-icon icon="mdi-arrow-left"></v-icon></button>
    <span class="slide-count font-weight-bold">{{ currentIndex + 1 }} - {{ slideTitles[currentIndex] }}</span>
    <button @click="nextSlide"><v-icon icon="mdi-arrow-right"></v-icon></button>
  </div>
</div>
</template>

<script setup>
import { ref } from 'vue'
import { Carousel, Slide } from 'vue3-carousel'
import 'vue3-carousel/dist/carousel.css'
import teamImg from '@/assets/team.jpg'
import teamOne from '@/assets/team-1.jpg'
import teamTwo from '@/assets/team-2.jpg'
import teamThree from '@/assets/team-3.jpg'
import teamFour from '@/assets/team-4.png'
import teamFive from '@/assets/team-5.jpg'
import teamSix from '@/assets/team-6.jpg'
import teamSeven from '@/assets/team-7.jpg'

const myCarousel = ref(null)
const currentIndex = ref(0)

const articles = ref([
  {
    title: "Salut, nous câ€™est Blue ðŸ’§!",
    text: 'Blue est nÃ© lors dâ€™une discussion dans mÃ©tro aprÃ¨s les cours.',
    img: teamOne,
  },
  {
    title: "Tu dois te demander comment câ€™est venu ðŸ¤” ?",
    text: 'Câ€™est parti dâ€™une femme qui avait une gourde de 3L dâ€™eau.',
    img: teamSeven,
  },
  {
    title: "VoilÃ , le dÃ©bat qui commenceâ€¦",
    text: 'Â« Comment on peut boire autant dâ€™eau ?Â», Â«Â Comment toi tu peux ne pas aimer lâ€™eau ?Â Â», bref on tournait en rond ðŸ˜… ! ',
    img: teamImg,
  },
  {
    title: "Conclusion du dÃ©bat ðŸ¤ : ",
    text: 'Câ€™est quand mÃªme dingue dâ€™Ã©viter de boire de lâ€™eau, juste parce que Ã§a nâ€™a pas de goÃ»tâ€¦',
    img: teamSix,
  },
  {
    title: "LÃ , normalement tâ€™as captÃ© ðŸ˜Ž ?",
    text: 'On a commencÃ© Ã  faire des recherches sur le marchÃ© de lâ€™eau et Ã  se renseigner sâ€™il y avait des solutions pour palier Ã  ce problÃ¨me.',
    img: teamTwo,
  },
  {
    title: "Nous voilÃ  dans la peau dâ€™Einstein. ",
    text: 'On a commencÃ© Ã  sâ€™intÃ©resser de plus en plus au sujet et Ã  imaginer des hypothÃ¨ses.',
    img: teamThree,
  },
  {
    title: "Notre solution ? ",
    text: 'Proposer des arÃ´mes naturels, sans sucre, sans colorant pour donner du goÃ»t Ã  ton eau et tâ€™aider Ã  mieux tâ€™hydrater.',
    img: teamFour,
  },
  {
    title: "Maintenant tu sais tout.",
    text: 'Ã‡a câ€™est Blue ðŸ’§!',
    img: teamFive,
  },
])

const slideTitles = ref([
  "La team Blue",
  "Une histoire de gourde",
  "Une profonde discussion",
  "On est dâ€™accord",
  "Hello la concu",
  "La team au labo",
  "Nos supers stars",
  "A suivre...",
])

const updateCurrentIndex = (newIndex) => {
  currentIndex.value = newIndex;
};

const prevSlide = () => {
  myCarousel.value.prev();
};

const nextSlide = () => {
  myCarousel.value.next();
};
</script>

<style lang="scss" scoped>
.carousel__item {
  height: 319px;
  width: 800px;
  background-color: white;
  font-size: 18px;

  img {
    max-height: 260px;
  }
}
.slide-count {
  display: inline-block;
  font-family: 'Poppins', sans-serif !important;
  font-size: clamp(14px, 3vw, 16px) !important;
  min-width: 260px;
  }
@media (max-width: 960px) {
  .slide-count {
    min-width: 200px;
  }
  .carousel__item {
    height: auto;
    div {
      font-size: 14px;
      justify-content: center;
      min-height: 150px;
    }
    img {
      width: 100%;
      height: 288px;
      object-fit: cover;
    }
  }
}
</style>
